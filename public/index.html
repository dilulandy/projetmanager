<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡¹ç›®ä¸äººå‘˜ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f5f7fa;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e6ed;
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            color: #606266;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }

        .tab:hover {
            color: #409eff;
        }

        .tab.active {
            color: #409eff;
            border-bottom-color: #409eff;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        label {
            margin-bottom: 8px;
            color: #303133;
            font-weight: 500;
            font-size: 14px;
        }

        input, select, textarea {
            padding: 10px 12px;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #409eff;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .multi-select {
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            padding: 8px;
            min-height: 45px;
        }

        .multi-select-item {
            display: inline-flex;
            align-items: center;
            background: #f0f9ff;
            color: #409eff;
            padding: 4px 8px;
            margin: 2px;
            border-radius: 3px;
            font-size: 13px;
        }

        .multi-select-item button {
            background: none;
            border: none;
            color: #409eff;
            margin-left: 5px;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
        }

        .select-dropdown {
            margin-top: 5px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            background: white;
        }

        .select-option {
            padding: 8px 12px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .select-option:hover {
            background: #f5f7fa;
        }

        .select-option.selected {
            background: #ecf5ff;
            color: #409eff;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            font-weight: 500;
        }

        .btn-primary {
            background: #409eff;
            color: white;
        }

        .btn-primary:hover {
            background: #66b1ff;
        }

        .btn-secondary {
            background: #e4e7ed;
            color: #606266;
        }

        .btn-secondary:hover {
            background: #d3d4d6;
        }

        .btn-danger {
            background: #f56c6c;
            color: white;
            padding: 6px 12px;
            font-size: 13px;
        }

        .btn-danger:hover {
            background: #f78989;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 500;
        }

        .status-executing {
            background: #67c23a;
            color: white;
        }

        .status-high {
            background: #e6a23c;
            color: white;
        }

        .status-low {
            background: #909399;
            color: white;
        }

        .projects-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .projects-table th,
        .projects-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ebeef5;
        }

        .projects-table th {
            background: #f5f7fa;
            color: #606266;
            font-weight: 600;
            font-size: 14px;
        }

        .projects-table tr:hover {
            background: #f5f7fa;
        }

        .gantt-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        .gantt-chart {
            min-width: 1000px;
        }

        .gantt-header {
            display: flex;
            border-bottom: 2px solid #dcdfe6;
            background: #f5f7fa;
            padding: 10px 0;
        }

        .gantt-label {
            width: 200px;
            padding: 0 12px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .gantt-timeline {
            flex: 1;
            display: flex;
            position: relative;
        }

        .gantt-month {
            flex: 1;
            text-align: center;
            font-size: 13px;
            border-left: 1px solid #e0e6ed;
            padding: 5px;
        }

        .gantt-row {
            display: flex;
            border-bottom: 1px solid #ebeef5;
            min-height: 50px;
            align-items: center;
        }

        .gantt-row-label {
            width: 200px;
            padding: 12px;
            font-size: 14px;
            flex-shrink: 0;
        }

        .gantt-row-bars {
            flex: 1;
            position: relative;
            height: 50px;
        }

        .gantt-bar {
            position: absolute;
            height: 30px;
            border-radius: 4px;
            top: 10px;
            padding: 0 8px;
            display: flex;
            align-items: center;
            font-size: 12px;
            color: white;
            cursor: pointer;
            transition: opacity 0.2s;
            overflow: hidden;
            white-space: nowrap;
        }

        .gantt-bar:hover {
            opacity: 0.85;
        }

        .gantt-bar-executing {
            background: #67c23a;
        }

        .gantt-bar-high {
            background: #e6a23c;
        }

        .gantt-bar-low {
            background: #909399;
        }

        .availability-section {
            margin-top: 30px;
        }

        .date-filter {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
        }

        .availability-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .person-card {
            background: white;
            border: 1px solid #e0e6ed;
            border-radius: 6px;
            padding: 16px;
            transition: all 0.3s;
        }

        .person-card.available {
            border-color: #67c23a;
            background: #f0f9ff;
        }

        .person-card.busy {
            border-color: #f56c6c;
            background: #fef0f0;
        }

        .person-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .person-status {
            font-size: 13px;
            color: #606266;
            margin-bottom: 10px;
        }

        .person-projects {
            font-size: 12px;
            color: #909399;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #909399;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #409eff;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .gantt-label,
            .gantt-row-label {
                width: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š é¡¹ç›®ä¸äººå‘˜ç®¡ç†ç³»ç»Ÿ</h1>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('add')">â• æ·»åŠ é¡¹ç›®</button>
            <button class="tab" onclick="switchTab('list')">ğŸ“‹ é¡¹ç›®åˆ—è¡¨</button>
            <button class="tab" onclick="switchTab('gantt')">ğŸ“ˆ ç”˜ç‰¹å›¾</button>
            <button class="tab" onclick="switchTab('availability')">ğŸ‘¥ äººå‘˜å¯ç”¨æ€§</button>
        </div>

        <!-- æ·»åŠ é¡¹ç›® -->
        <div id="tab-add" class="tab-content active">
            <div class="card">
                <h2 style="margin-bottom: 20px; font-size: 20px; color: #303133;">æ–°å»ºé¡¹ç›®</h2>
                <form id="projectForm">
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label>é¡¹ç›®åç§° *</label>
                            <input type="text" id="projectName" required>
                        </div>
                        
                        <div class="form-group">
                            <label>é¡¹ç›®å®¢æˆ· *</label>
                            <input type="text" id="clientName" required>
                        </div>
                        
                        <div class="form-group">
                            <label>é¡¹ç›®çŠ¶æ€ *</label>
                            <select id="projectStatus" required>
                                <option value="executing">å·²æœ‰åˆåŒæ­£æ‰§è¡Œä¸­</option>
                                <option value="high">å¯èƒ½æ€§å¤§çš„é¡¹ç›®</option>
                                <option value="low">æœ‰å¯èƒ½æˆ–å¯èƒ½æ€§å°çš„é¡¹ç›®</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>å¼€å§‹æ—¶é—´ *</label>
                            <input type="date" id="startDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label>ç»“æŸæ—¶é—´ *</label>
                            <input type="date" id="endDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label>é¡¹ç›®è´Ÿè´£äºº *</label>
                            <select id="projectLeader" required>
                                <option value="">è¯·é€‰æ‹©</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>é¡¹ç›®å‚ä¸äºº *</label>
                            <div class="multi-select" id="participantsDisplay"></div>
                            <div class="select-dropdown" id="participantsDropdown"></div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label>å…¶ä»–å¤‡æ³¨</label>
                            <textarea id="projectNotes" placeholder="è¾“å…¥é¡¹ç›®ç›¸å…³å¤‡æ³¨ä¿¡æ¯..."></textarea>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px;">
                        <button type="submit" class="btn btn-primary">ä¿å­˜é¡¹ç›®</button>
                        <button type="button" class="btn btn-secondary" onclick="resetForm()">é‡ç½®</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- é¡¹ç›®åˆ—è¡¨ -->
        <div id="tab-list" class="tab-content">
            <div class="card">
                <h2 style="margin-bottom: 20px; font-size: 20px; color: #303133;">æ‰€æœ‰é¡¹ç›®</h2>
                <div id="projectsList"></div>
            </div>
        </div>

        <!-- ç”˜ç‰¹å›¾ -->
        <div id="tab-gantt" class="tab-content">
            <div class="card">
                <h2 style="margin-bottom: 20px; font-size: 20px; color: #303133;">é¡¹ç›®æ—¶é—´çº¿</h2>
                <div id="ganttChart"></div>
            </div>
        </div>

        <!-- äººå‘˜å¯ç”¨æ€§ -->
        <div id="tab-availability" class="tab-content">
            <div class="card">
                <h2 style="margin-bottom: 20px; font-size: 20px; color: #303133;">äººå‘˜å¯ç”¨æ€§åˆ†æ</h2>
                <div class="date-filter">
                    <label>æŸ¥è¯¢æ—¶æ®µ:</label>
                    <input type="date" id="availStartDate">
                    <span>è‡³</span>
                    <input type="date" id="availEndDate">
                    <button class="btn btn-primary" onclick="checkAvailability()">æŸ¥è¯¢</button>
                </div>
                <div id="availabilityResult"></div>
            </div>
        </div>
    </div>

    <script>
        // APIåŸºç¡€URL - éƒ¨ç½²æ—¶ä¿®æ”¹ä¸ºå®é™…æœåŠ¡å™¨åœ°å€
        const API_BASE = window.location.origin;
        
        // æ•°æ®å­˜å‚¨
        let projects = [];
        let teamMembers = [];
        let selectedParticipants = [];

        // åˆå§‹åŒ–
        async function init() {
            await loadTeamMembers();
            await loadProjects();
            loadParticipantsDropdown();
            setDefaultDates();
        }

        // åŠ è½½å›¢é˜Ÿæˆå‘˜
        async function loadTeamMembers() {
            try {
                const response = await fetch(`${API_BASE}/api/team-members`);
                teamMembers = await response.json();
                
                const leaderSelect = document.getElementById('projectLeader');
                leaderSelect.innerHTML = '<option value="">è¯·é€‰æ‹©</option>';
                teamMembers.forEach(member => {
                    const option = document.createElement('option');
                    option.value = member;
                    option.textContent = member;
                    leaderSelect.appendChild(option);
                });
            } catch (error) {
                console.error('åŠ è½½å›¢é˜Ÿæˆå‘˜å¤±è´¥:', error);
                alert('æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨,è¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ');
            }
        }

        // åŠ è½½é¡¹ç›®
        async function loadProjects() {
            try {
                const response = await fetch(`${API_BASE}/api/projects`);
                projects = await response.json();
                renderProjectsList();
                renderGanttChart();
            } catch (error) {
                console.error('åŠ è½½é¡¹ç›®å¤±è´¥:', error);
            }
        }

        // åŠ è½½å‚ä¸äººä¸‹æ‹‰åˆ—è¡¨
        function loadParticipantsDropdown() {
            const dropdown = document.getElementById('participantsDropdown');
            dropdown.innerHTML = '';
            teamMembers.forEach(member => {
                const option = document.createElement('div');
                option.className = 'select-option';
                option.textContent = member;
                option.onclick = () => toggleParticipant(member);
                dropdown.appendChild(option);
            });
            updateParticipantsDisplay();
        }

        // åˆ‡æ¢å‚ä¸äººé€‰æ‹©
        function toggleParticipant(member) {
            const index = selectedParticipants.indexOf(member);
            if (index > -1) {
                selectedParticipants.splice(index, 1);
            } else {
                selectedParticipants.push(member);
            }
            updateParticipantsDisplay();
            updateDropdownStyles();
        }

        // æ›´æ–°å‚ä¸äººæ˜¾ç¤º
        function updateParticipantsDisplay() {
            const display = document.getElementById('participantsDisplay');
            if (selectedParticipants.length === 0) {
                display.innerHTML = '<span style="color: #909399; font-size: 14px;">è¯·é€‰æ‹©å‚ä¸äººå‘˜</span>';
            } else {
                display.innerHTML = selectedParticipants.map(member => `
                    <span class="multi-select-item">
                        ${member}
                        <button onclick="toggleParticipant('${member}')" type="button">Ã—</button>
                    </span>
                `).join('');
            }
        }

        // æ›´æ–°ä¸‹æ‹‰åˆ—è¡¨æ ·å¼
        function updateDropdownStyles() {
            const options = document.querySelectorAll('#participantsDropdown .select-option');
            options.forEach(option => {
                if (selectedParticipants.includes(option.textContent)) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });
        }

        // æäº¤è¡¨å•
        document.getElementById('projectForm').onsubmit = async function(e) {
            e.preventDefault();
            
            if (selectedParticipants.length === 0) {
                alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ä½é¡¹ç›®å‚ä¸äºº');
                return;
            }

            const project = {
                name: document.getElementById('projectName').value,
                client: document.getElementById('clientName').value,
                status: document.getElementById('projectStatus').value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                leader: document.getElementById('projectLeader').value,
                participants: selectedParticipants,
                notes: document.getElementById('projectNotes').value
            };

            try {
                const response = await fetch(`${API_BASE}/api/projects`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(project)
                });

                if (response.ok) {
                    alert('é¡¹ç›®æ·»åŠ æˆåŠŸ!');
                    resetForm();
                    await loadProjects();
                } else {
                    alert('æ·»åŠ é¡¹ç›®å¤±è´¥');
                }
            } catch (error) {
                console.error('æäº¤å¤±è´¥:', error);
                alert('æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨');
            }
        };

        // é‡ç½®è¡¨å•
        function resetForm() {
            document.getElementById('projectForm').reset();
            selectedParticipants = [];
            updateParticipantsDisplay();
            updateDropdownStyles();
        }

        // æ¸²æŸ“é¡¹ç›®åˆ—è¡¨
        function renderProjectsList() {
            const container = document.getElementById('projectsList');
            
            if (projects.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“­</div>
                        <div>æš‚æ— é¡¹ç›®,è¯·å…ˆæ·»åŠ é¡¹ç›®</div>
                    </div>
                `;
                return;
            }

            const statusText = {
                'executing': 'å·²æœ‰åˆåŒæ­£æ‰§è¡Œä¸­',
                'high': 'å¯èƒ½æ€§å¤§çš„é¡¹ç›®',
                'low': 'æœ‰å¯èƒ½æˆ–å¯èƒ½æ€§å°çš„é¡¹ç›®'
            };

            container.innerHTML = `
                <table class="projects-table">
                    <thead>
                        <tr>
                            <th>é¡¹ç›®åç§°</th>
                            <th>å®¢æˆ·</th>
                            <th>çŠ¶æ€</th>
                            <th>æ—¶é—´</th>
                            <th>è´Ÿè´£äºº</th>
                            <th>å‚ä¸äºº</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${projects.map(project => `
                            <tr>
                                <td><strong>${project.name}</strong></td>
                                <td>${project.client}</td>
                                <td><span class="status-badge status-${project.status}">${statusText[project.status]}</span></td>
                                <td>${project.startDate} ~ ${project.endDate}</td>
                                <td>${project.leader}</td>
                                <td>${project.participants.join(', ')}</td>
                                <td>
                                    <button class="btn btn-danger" onclick="deleteProject(${project.id})">åˆ é™¤</button>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        // åˆ é™¤é¡¹ç›®
        async function deleteProject(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—?')) {
                try {
                    const response = await fetch(`${API_BASE}/api/projects/${id}`, {
                        method: 'DELETE'
                    });

                    if (response.ok) {
                        await loadProjects();
                    } else {
                        alert('åˆ é™¤å¤±è´¥');
                    }
                } catch (error) {
                    console.error('åˆ é™¤å¤±è´¥:', error);
                    alert('æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨');
                }
            }
        }

        // æ¸²æŸ“ç”˜ç‰¹å›¾
        function renderGanttChart() {
            const container = document.getElementById('ganttChart');
            
            if (projects.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“Š</div>
                        <div>æš‚æ— é¡¹ç›®æ•°æ®</div>
                    </div>
                `;
                return;
            }

            const allDates = projects.flatMap(p => [new Date(p.startDate), new Date(p.endDate)]);
            const minDate = new Date(Math.min(...allDates));
            const maxDate = new Date(Math.max(...allDates));
            
            const months = [];
            let current = new Date(minDate.getFullYear(), minDate.getMonth(), 1);
            while (current <= maxDate) {
                months.push(new Date(current));
                current.setMonth(current.getMonth() + 1);
            }

            const totalDays = (maxDate - minDate) / (1000 * 60 * 60 * 24);

            container.innerHTML = `
                <div class="gantt-container">
                    <div class="gantt-chart">
                        <div class="gantt-header">
                            <div class="gantt-label">é¡¹ç›®åç§°</div>
                            <div class="gantt-timeline">
                                ${months.map(month => `
                                    <div class="gantt-month">
                                        ${month.getFullYear()}å¹´${month.getMonth() + 1}æœˆ
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        ${projects.map(project => {
                            const start = new Date(project.startDate);
                            const end = new Date(project.endDate);
                            const leftPercent = ((start - minDate) / (1000 * 60 * 60 * 24) / totalDays) * 100;
                            const widthPercent = ((end - start) / (1000 * 60 * 60 * 24) / totalDays) * 100;
                            
                            return `
                                <div class="gantt-row">
                                    <div class="gantt-row-label">${project.name}</div>
                                    <div class="gantt-row-bars">
                                        <div class="gantt-bar gantt-bar-${project.status}" 
                                             style="left: ${leftPercent}%; width: ${widthPercent}%"
                                             title="${project.name}\n${project.startDate} - ${project.endDate}\nè´Ÿè´£äºº: ${project.leader}">
                                            ${project.name}
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }

        // è®¾ç½®é»˜è®¤æ—¥æœŸ
        function setDefaultDates() {
            const today = new Date();
            const nextMonth = new Date(today.getFullYear(), today.getMonth() + 1, today.getDate());
            
            document.getElementById('availStartDate').valueAsDate = today;
            document.getElementById('availEndDate').valueAsDate = nextMonth;
        }

        // æ£€æŸ¥äººå‘˜å¯ç”¨æ€§
        function checkAvailability() {
            const startDate = new Date(document.getElementById('availStartDate').value);
            const endDate = new Date(document.getElementById('availEndDate').value);
            const container = document.getElementById('availabilityResult');

            if (!startDate || !endDate) {
                alert('è¯·é€‰æ‹©æŸ¥è¯¢æ—¶æ®µ');
                return;
            }

            if (startDate > endDate) {
                alert('å¼€å§‹æ—¥æœŸä¸èƒ½æ™šäºç»“æŸæ—¥æœŸ');
                return;
            }

            const availability = {};
            teamMembers.forEach(member => {
                availability[member] = {
                    projects: [],
                    available: true
                };
            });

            projects.forEach(project => {
                const projectStart = new Date(project.startDate);
                const projectEnd = new Date(project.endDate);
                
                if (projectStart <= endDate && projectEnd >= startDate) {
                    if (availability[project.leader]) {
                        availability[project.leader].projects.push(project.name);
                        availability[project.leader].available = false;
                    }
                    project.participants.forEach(p => {
                        if (availability[p]) {
                            availability[p].projects.push(project.name);
                            availability[p].available = false;
                        }
                    });
                }
            });

            const availableMembers = Object.entries(availability).filter(([_, data]) => data.available);
            const busyMembers = Object.entries(availability).filter(([_, data]) => !data.available);

            container.innerHTML = `
                <div class="availability-section">
                    <h3 style="color: #67c23a; margin-bottom: 15px;">âœ“ å¯ç”¨äººå‘˜ (${availableMembers.length}äºº)</h3>
                    <div class="availability-grid">
                        ${availableMembers.map(([name, _]) => `
                            <div class="person-card available">
                                <div class="person-name">ğŸ‘¤ ${name}</div>
                                <div class="person-status" style="color: #67c23a;">å½“å‰å¯ç”¨</div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="availability-section">
                    <h3 style="color: #f56c6c; margin-bottom: 15px;">âœ— å¿™ç¢Œäººå‘˜ (${busyMembers.length}äºº)</h3>
                    <div class="availability-grid">
                        ${busyMembers.map(([name, data]) => `
                            <div class="person-card busy">
                                <div class="person-name">ğŸ‘¤ ${name}</div>
                                <div class="person-status" style="color: #f56c6c;">æ­£åœ¨å‚ä¸é¡¹ç›®</div>
                                <div class="person-projects">ğŸ“‹ ${data.projects.join(', ')}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById('tab-' + tabName).classList.add('active');

            if (tabName === 'gantt') {
                renderGanttChart();
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        init();
    </script>
</body>
</html>
